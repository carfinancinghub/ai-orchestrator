# CFH TypeScript Migration — Add-on (TypeSafe + “@” aliases)

This add-on complements the main review. All examples must:
- Use **@ path aliases** only (no relative `../`).
- Compile cleanly with `tsc --noEmit`.
- Be placed under `artifacts/generated/20250923_2212/` exactly as `// path:`.

---

### Addon 01 — Shared Money type
```ts
// path: @types/common/Money.ts
export type Money = number; // cents or dollars; consumers must document unit
Addon 02 — APR↔Rate utils
ts
Copy code
// path: @utils/finance/rates.ts
export const aprToMonthly = (apr: number) => apr / 12;
export const monthlyToApr = (r: number) => r * 12;
Addon 03 — Result DTO
ts
Copy code
// path: @types/finance/LoanResult.ts
import type { LoanTerms } from "@types/finance/LoanTerms";
export interface LoanResult {
  terms: LoanTerms;
  monthly: number;
  total: number;
}
Addon 04 — Orchestrator façade
ts
Copy code
// path: @services/LoanOrchestrator.ts
import type { LoanTerms } from "@types/finance/LoanTerms";
import type { LoanResult } from "@types/finance/LoanResult";
import { AIOptimizer } from "@ai/loanPlanner";

export function compute(terms: LoanTerms): LoanResult {
  const monthly = AIOptimizer.calculateMonthly(terms);
  return { terms, monthly, total: +(monthly * terms.termMonths).toFixed(2) };
}
Addon 05 — Barrel exports
ts
Copy code
// path: @index.ts
export * from "@types/finance/LoanTerms";
export * from "@types/finance/LoanResult";
export * from "@utils/finance/monthly";
export * from "@utils/finance/payment";
export * from "@utils/finance/rates";
export * from "@services/LoanCalculator";
export * from "@services/LoanOrchestrator";
export * from "@ai/loanPlanner";
Addon 06 — React TSX sample (with @ imports)
tsx
Copy code
// path: @components/LoanCalc.tsx
import React from "react";
import type { LoanTerms } from "@types/finance/LoanTerms";
import { compute } from "@services/LoanOrchestrator";

export const LoanCalc: React.FC<{ terms: LoanTerms }> = ({ terms }) => {
  const result = compute(terms);
  return (
    <section>
      <h2>Monthly Payment</h2>
      <p>${result.monthly.toFixed(2)} / mo</p>
      <small>Total: ${result.total.toFixed(2)}</small>
    </section>
  );
};
export default LoanCalc;
Addon 07 — Minimal tsconfig alias hint (documentation as code)
ts
Copy code
// path: @docs/tsconfig.aliases.ts
// This is documentation-only to signal required aliases for synthesizers.
// tsconfig.json should map:
//   "@types/*"      -> "src/types/*"
//   "@utils/*"      -> "src/utils/*"
//   "@services/*"   -> "src/services/*"
//   "@ai/*"         -> "src/ai/*"
//   "@components/*" -> "src/components/*"
export const REQUIRED_ALIASES = ["@types/*","@utils/*","@services/*","@ai/*","@components/*"];
